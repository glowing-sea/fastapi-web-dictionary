{% extends "base.html" %}
{% block content %}
  <h1>Profile</h1>
  <div class="grid2">
    <section class="card">
      <h2>Public info</h2>
      <form method="post" action="/me/profile">
        <label>Display name <input name="display_name" value="{{ user.display_name }}" maxlength="60" /></label>
        <label>Bio <textarea name="bio" rows="5" maxlength="500">{{ user.bio }}</textarea></label>
        <button type="submit">Save profile</button>
      </form>
    </section>
    <section class="card">
      <h2>Account</h2>
      <p><strong>User ID:</strong> {{ user.id }}</p>
      <p><strong>Username:</strong> {{ user.username }}</p>
      <p><strong>Role:</strong> {% if user.is_admin %}Admin{% else %}Normal user{% endif %}</p>
      <p><strong>Created:</strong> {{ user.created_at }}</p>
      <hr/>
      <h3>Change username</h3>
      <form method="post" action="/me/username">
        <label>New username <input name="new_username" required minlength="3" /></label>
        <button type="submit">Change username</button>
      </form>

<hr/>
<h3>Change password</h3>
<form method="post" action="/me/password">
  <label>New password
    <input type="password" name="new_password" required minlength="6" />
  </label>
  <label>Confirm new password
    <input type="password" name="new_password_confirm" required minlength="6" />
  </label>
  <button type="submit">Change password</button>
  <p class="hint">For this demo, we don't ask for your old password.</p>
</form>

<hr/>
<h3>Delete account</h3>
<p class="hint">This will delete your account and all related data (ideas, favourites, history, sessions). This cannot be undone.</p>
<form method="post" action="/me/delete" onsubmit="return confirm('Delete your account? This cannot be undone.');">
  <button class="danger" type="submit">Delete my account</button>
</form>
    </section>
  </div>
{% endblock %}
